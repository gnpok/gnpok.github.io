---
layout: post
title:  "无限级分类数据库设计"
categories: Mysql
tags:  Mysql 
author: cossete
---

* content
{:toc}

## 场景
> 在国家或人员关系数据库设计时，会遇到无限级分类的情况，优良的数据库设计会给程序性能带来提升

## 常用方法

> 数据库设计一个pid关联父级的id，设计如下：

![avatar](data:image/png;base64,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)

`使用递归方法得出pid=0所有的子类及子类的子类，在数据量多的时候，该方法会给数据库很大负担`

```php
class Index
{
    static $country;
    
    public function index()
    {
        $ch = db('country')->where('pid',0)->find();
        $this->getTree($ch['id']);
        var_dump(self::$country);
    }

    public function getTree($pid){
        $res = db('country')->where('pid',$pid)->select();
        if(!empty($res)){
            foreach ($res as $key => $value) {
                self::$country[] = $value;
                $this->getTree($value['id']);
            }
        }
    }
}
```

## 方法改进
> 设计如下图

![avatar](data:image/png;base64,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)

```php
 //这样我们就很轻松的得出pid=0的所有子类及子类的子类
 $sql = 'SELECT * FROM %s WHERE `pid` LIKE \'%s\'';
 //这边pid可以添加索引，提高查询效率
 $sql = sprintf($sql,'_country','0,%');
 $tree = db()->query($sql);
 var_dump($tree);
```

## 总结
> 两种方法各有优缺，场景适用就好

